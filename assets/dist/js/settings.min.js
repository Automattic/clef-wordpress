/*! Clef for WordPress - v1.9.11
 * http://getclef.com
 * Licensed GPLv2+ */
var app;(function(t){var e,i,n,s;return e=Backbone.View.extend({id:"clef-settings-container",initialize:function(t){return this.opts=t,this.settings=new i(this.opts),this.tutorial=new s(this.opts),this.opts.configured?this.settings.render():this.tutorial.render()}}),s=Backbone.View.extend({el:t("#clef-tutorial"),events:{"click .next":"next","click .previous":"previous"},initialize:function(e){var i,s,r,u;for(this.opts=e,this.subs=[],u=this.$el.find(".sub"),s=0,r=u.length;r>s;s++)i=u[s],this.subs.push(new n({el:i}));return this.currentSub=this.subs[0],t(window).on("message",this.handleLogin.bind(this))},render:function(){return this.currentSub.render(),this.loadIFrame(),this.$el.fadeIn()},next:function(){var t;return t=this.subs[_.indexOf(this.subs,this.currentSub)+1],t?(this.currentSub.hide(),t.render(),this.currentSub=t):void 0},previous:function(){var t;return t=this.subs[_.indexOf(this.subs,this.currentSub)-1],t?(this.currentSub.hide(),t.render(),this.currentSub=t):void 0},loadIFrame:function(){var t;return t=this.$el.find("iframe"),t.attr("src",t.data("src"))},handleLogin:function(){return this.currentSub.isLogin()&&this.next(),this.createApplication()},createApplication:function(){return t.ajax({method:"POST",url:""+this.opts.clefBase+"/api/v1/manage/create",data:this.opts.setup,success:function(t){return console.log(t)}})}}),n=Backbone.View.extend({initialize:function(e){return this.opts=e,this.setElement(t(this.opts.el))},render:function(){return this.$el.show()},hide:function(){return this.$el.hide()},remove:function(){return console.log("removing"),this.$el.remove()},isLogin:function(){return this.$el.find("iframe").length}}),i=Backbone.View.extend({el:t("#clef-settings"),initialize:function(t){this.opts=t},hide:function(){return this.$el.hide()},render:function(){return this.$el.fadeIn()}}),this.AppView=e}).call(this,jQuery),app=new AppView(options);